<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tests Hub - Devoir Synth√®se N¬∞2 (1√®re AS) - Amen Allah</title>
    
    <!-- PWA Meta Tags (bleus) -->
    <meta name="theme-color" content="#3b82f6">
    <meta name="description" content="Devoir de Synth√®se N¬∞2 - 1√®re ann√©e secondaire - Math√©matiques - Lyc√©e Hannibal">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Tests Hub - Devoir 1√®re">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="assets/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/icon-192x192.png">
    
    <!-- Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- KaTeX -->
    <link rel="stylesheet" href="katex/katex.min.css">
    <script defer src="katex/katex.min.js"></script>
    <script defer src="katex/contrib/auto-render.min.js"></script>
    
    <style>
        /* Palette bleue - identique au mod√®le */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background 0.3s ease;
            color: #1e3a8a;
        }
        
        body.Tests-Hub-dark-theme {
            background: linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%);
            color: #eff6ff;
        }
        
        /* Header */
        .Tests-Hub-header-container {
            background: linear-gradient(to left, #3b82f6, #60a5fa);
            color: white;
            padding: 1.5rem 2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: background 0.3s ease;
            position: relative;
        }
        
        .Tests-Hub-dark-theme .Tests-Hub-header-container {
            background: linear-gradient(to left, #1e3a8a, #3b82f6, #60a5fa);
        }
        
        .Tests-Hub-header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
        }
        
        .Tests-Hub-header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .Tests-Hub-header-icon {
            width: 48px;
            height: 48px;
            object-fit: contain;
        }
        
        .Tests-Hub-header-title {
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: 1px;
        }
        
        .Tests-Hub-header-subtitle {
            font-size: 1rem;
            opacity: 0.9;
            margin-top: 3px;
        }
        
        .Tests-Hub-header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .Tests-Hub-language-selector {
            position: relative;
        }
        
        .Tests-Hub-language-button {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.3s ease;
        }
        
        .Tests-Hub-language-button:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .Tests-Hub-language-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            min-width: 120px;
            display: none;
            z-index: 100;
        }
        
        .Tests-Hub-language-selector:hover .Tests-Hub-language-dropdown {
            display: block;
        }
        
        .Tests-Hub-language-option {
            padding: 0.8rem 1rem;
            color: #1e3a8a;
            cursor: pointer;
            transition: background 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .Tests-Hub-language-option:hover {
            background: #bfdbfe;
        }
        
        .Tests-Hub-dark-theme .Tests-Hub-language-dropdown {
            background: #1e3a8a;
        }
        
        .Tests-Hub-dark-theme .Tests-Hub-language-option {
            color: #eff6ff;
        }
        
        .Tests-Hub-dark-theme .Tests-Hub-language-option:hover {
            background: #3b82f6;
        }
        
        .Tests-Hub-theme-toggle {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.3s ease;
        }
        
        .Tests-Hub-theme-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* Back Button */
        .Tests-Hub-back-button {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.3s ease;
            text-decoration: none;
            font-size: 0.95rem;
        }
        
        .Tests-Hub-back-button:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* Main Content */
        .Tests-Hub-main-container {
            flex: 1;
            max-width: 1000px;
            margin: 2rem auto;
            padding: 0 2rem;
            width: 100%;
        }
        
        .Tests-Hub-test-header {
            text-align: center;
            background: linear-gradient(to left, #3b82f6, #60a5fa);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .Tests-Hub-dark-theme .Tests-Hub-test-header {
            background: linear-gradient(to left, #1e3a8a, #3b82f6);
        }
        
        .Tests-Hub-test-section {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: background 0.3s ease, color 0.3s ease;
        }
        
        .Tests-Hub-dark-theme .Tests-Hub-test-section {
            background: #1e40af;
            color: #eff6ff;
        }
        
        .Tests-Hub-test-section h2 {
            color: #3b82f6;
            border-bottom: 2px solid #60a5fa;
            padding-bottom: 8px;
            margin-bottom: 1.5rem;
        }
        
        .Tests-Hub-dark-theme .Tests-Hub-test-section h2 {
            color: #bfdbfe;
        }
        
        .Tests-Hub-instructions {
            background: #dbeafe;
            padding: 1rem;
            border-right: 4px solid #3b82f6;
            margin-bottom: 1.5rem;
            border-radius: 5px;
        }
        
        .Tests-Hub-dark-theme .Tests-Hub-instructions {
            background: #1e3a8a;
            border-right-color: #60a5fa;
        }
        
        .Tests-Hub-question {
            margin: 1.5rem 0;
            padding-right: 10px;
        }
        
        .Tests-Hub-question-number {
            font-weight: bold;
            color: #3b82f6;
        }
        
        .Tests-Hub-dark-theme .Tests-Hub-question-number {
            color: #bfdbfe;
        }
        
        /* KaTeX LTR */
        .katex {
            direction: ltr !important;
            unicode-bidi: isolate !important;
            display: inline-block;
        }
        .katex * {
            direction: ltr !important;
        }

        /* Am√©lioration des √©quations */
        .Tests-Hub-question p {
            font-size: 1.2em;
            overflow-x: auto;
            overflow-y: hidden;
            white-space: nowrap;
            padding-bottom: 5px;
            margin: 10px 0;
        }
        .Tests-Hub-question p::-webkit-scrollbar {
            height: 6px;
        }
        .Tests-Hub-question p::-webkit-scrollbar-thumb {
            background: #3b82f6;
            border-radius: 10px;
        }
        @media (max-width: 600px) {
            .Tests-Hub-question p {
                font-size: 1.1em;
            }
        }
        .Tests-Hub-question p:not(:has(.katex)) {
            white-space: normal;
        }
        
        /* Bouton correction */
        .Tests-Hub-correction-toggle-container {
            text-align: center;
            margin: 2rem 0;
        }
        
        .Tests-Hub-toggle-button {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background: linear-gradient(to left, #3b82f6, #60a5fa);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .Tests-Hub-toggle-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .Tests-Hub-correction-section {
            background: #dbeafe;
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border-right: 4px solid #3b82f6;
            transition: background 0.3s ease;
        }
        
        .Tests-Hub-dark-theme .Tests-Hub-correction-section {
            background: #1e3a8a;
            border-right-color: #60a5fa;
        }
        
        .Tests-Hub-correction-section h3 {
            color: #3b82f6;
            margin-top: 0;
            margin-bottom: 1rem;
        }
        
        .Tests-Hub-dark-theme .Tests-Hub-correction-section h3 {
            color: #bfdbfe;
        }
        
        .Tests-Hub-correction-answer {
            background: rgba(59, 130, 246, 0.05);
            padding: 1rem;
            border-radius: 5px;
            margin: 1rem 0;
            border-right: 3px solid #3b82f6;
        }
        
        .Tests-Hub-dark-theme .Tests-Hub-correction-answer {
            background: rgba(191, 219, 254, 0.1);
            border-right-color: #60a5fa;
        }
        
        .Tests-Hub-hidden {
            display: none;
        }
        
        /* Footer */
        .Tests-Hub-footer-container {
            background: linear-gradient(to left, #3b82f6, #60a5fa);
            color: white;
            padding: 2rem;
            margin-top: auto;
            transition: background 0.3s ease;
        }
        
        .Tests-Hub-dark-theme .Tests-Hub-footer-container {
            background: linear-gradient(to left, #1e3a8a, #3b82f6, #60a5fa);
        }
        
        .Tests-Hub-footer-content {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }
        
        .Tests-Hub-footer-columns {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
        }
        
        .Tests-Hub-footer-column h3 {
            color: #bfdbfe;
            margin-bottom: 1rem;
        }
        
        .Tests-Hub-developer-name, .Tests-Hub-version-number {
            font-weight: 600;
            color: #bfdbfe;
        }
        
        /* Boutons t√©l√©chargement */
        .Tests-Hub-download-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 2.5rem 0;
            padding: 1.5rem;
            background: linear-gradient(to left, rgba(59, 130, 246, 0.1), rgba(96, 165, 250, 0.1));
            border-radius: 12px;
        }
        
        .Tests-Hub-download-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-width: 100px;
            height: 100px;
            padding: 1rem;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .Tests-Hub-download-button span:first-child {
            font-size: 2rem;
            margin-bottom: 8px;
        }
        
        .Tests-Hub-download-button.pdf {
            background: linear-gradient(135deg, #3b82f6, #60a5fa);
            color: white;
        }
        
        .Tests-Hub-download-button.odt {
            background: linear-gradient(135deg, #2563eb, #3b82f6);
            color: white;
        }
        
        .Tests-Hub-download-button.png {
            background: linear-gradient(135deg, #1e3a8a, #2563eb);
            color: white;
        }
        
        .Tests-Hub-download-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }
        
        @media (max-width: 768px) {
            .Tests-Hub-header-content {
                flex-direction: column;
            }
            .Tests-Hub-footer-columns {
                grid-template-columns: 1fr;
            }
        }

        /* Styles pour les graphiques */
        .Tests-Hub-diagram-container {
            margin: 20px 0;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            text-align: center;
        }
        .Tests-Hub-diagram-canvas {
            width: 100%;
            height: auto;
            border: 1px solid #ccc;
            border-radius: 4px;
            background: white;
        }
        .Tests-Hub-dark-theme .Tests-Hub-diagram-canvas {
            border-color: #60a5fa;
            background: #1e3a8a;
        }
    </style>
</head>
<body>
    <header class="Tests-Hub-header-container">
        <div class="Tests-Hub-header-content">
            <div class="Tests-Hub-header-left">
                <img src="assets/icons/icon-96x96.png" alt="Tests Hub Logo" class="Tests-Hub-header-icon">
                <div>
                    <h1 class="Tests-Hub-header-title">Math√©matiques - Devoir de Synth√®se N¬∞2 (1√®re AS)</h1>
                    <div class="Tests-Hub-header-subtitle">1√®re S1 et S2 - Lyc√©e Hannibal</div>
                </div>
            </div>
            
            <div class="Tests-Hub-header-controls">
               <a href="index.html" class="Tests-Hub-back-button">
                    <span>‚Üê</span>
                    <span>Retour aux tests</span>
                </a>
                
                <div class="Tests-Hub-language-selector">
                    <button class="Tests-Hub-language-button">
                        <span>üåê</span>
                        <span>Fran√ßais</span>
                        <span>‚ñº</span>
                    </button>
                    <div class="Tests-Hub-language-dropdown">
                        <div class="Tests-Hub-language-option" data-language="ar">üåê ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</div>
                        <div class="Tests-Hub-language-option" data-language="fr">üåê Fran√ßais</div>
                        <div class="Tests-Hub-language-option" data-language="en">üåê English</div>
                    </div>
                </div>
                
                <button class="Tests-Hub-theme-toggle" id="themeToggle">
                    <span id="themeIcon">üåô</span>
                    <span>Mode sombre</span>
                </button>
            </div>
        </div>
    </header>
    
    <main class="Tests-Hub-main-container">
        <!-- En-t√™te sp√©cifique au devoir -->
        <div class="Tests-Hub-test-header">
            <h1>Devoir de Synth√®se N¬∞2 en Math√©matiques</h1>
            <p>Ann√©e scolaire : 2022-2023</p>
            <p>Classes : 1√®re S1 et S2</p>
            <p>Professeur : M. Amen Allah</p>
            <p>√âtablissement : Lyc√©e Hannibal</p>
            <p>Dur√©e : 1 h 30 min</p>
        </div>
        
        <div class="Tests-Hub-test-section Tests-Hub-instructions">
            <h3>Instructions</h3>
            <ul>
                <li>Pour chaque question, une seule proposition est correcte. Entourer la bonne r√©ponse.</li>
                <li>Aucune justification n'est demand√©e dans l'√©nonc√©, mais la correction d√©taill√©e est fournie plus bas.</li>
                <li>Le symbole Œî (delta) est un rappel : v√©rifiez vos calculs.</li>
            </ul>
        </div>
        
        <!-- ==================== EXERCICE N¬∫1 (4 points) ==================== -->
        <div class="Tests-Hub-test-section">
            <h2>EXERCICE N¬∫1 (4 points)</h2>
            <p>Pour chaque question, une seule proposition est correcte. Entourer la bonne r√©ponse.</p>
            
            <div class="Tests-Hub-question">
                <p><span class="Tests-Hub-question-number">1)</span> \((\sqrt{5} - 2)^2\) est √©gal √† :</p>
                <p style="margin-left: 2rem;">a/ \(38 + 17\sqrt{5}\) &nbsp;&nbsp;&nbsp; b/ \(-28 + 17\sqrt{5}\) &nbsp;&nbsp;&nbsp; c/ \(9 - 4\sqrt{5}\)</p>
                
                <p><span class="Tests-Hub-question-number">2)</span> \(A = \{ x \in \mathbb{R} \;|\; |x| \geq -2 \}\). Alors :</p>
                <p style="margin-left: 2rem;">a/ \(A = \mathbb{R}\) &nbsp;&nbsp;&nbsp; b/ \(A = ]-\infty, -2] \cup [2, +\infty[\) &nbsp;&nbsp;&nbsp; c/ \(A = [-2, 2]\)</p>
                
                <p><span class="Tests-Hub-question-number">3)</span> \(\sqrt{(\pi - 3,14)^2}\) est √©gal √† :</p>
                <p style="margin-left: 2rem;">a/ \((3,14 - \pi)\) &nbsp;&nbsp;&nbsp; b/ \((\pi - 3,14)\) &nbsp;&nbsp;&nbsp; c/ \((\pi + 3,14)\)</p>
                
                <p><span class="Tests-Hub-question-number">4)</span> \(\left(\frac{1}{2}-1\right)\left(\frac{1}{3}-1\right)\left(\frac{1}{4}-1\right)\cdots\left(\frac{1}{50}-1\right) =\)</p>
                <p style="margin-left: 2rem;">a/ \(\frac{1}{50}\) &nbsp;&nbsp;&nbsp; b/ \(-\frac{1}{50}\) &nbsp;&nbsp;&nbsp; c/ \(-\frac{1}{49}\)</p>
            </div>
        </div>

        <!-- ==================== EXERCICE N¬∫2 (4 points) ==================== -->
        <div class="Tests-Hub-test-section">
            <h2>EXERCICE N¬∫2 (4 points)</h2>
            <div class="Tests-Hub-question">
                <p><span class="Tests-Hub-question-number">1)</span> 
                    a) D√©velopper \((3 + \sqrt{2})^2\), \((3 + \sqrt{2})^3\) et \((2\sqrt{2} - 3)^2\).<br>
                    b) Calculer alors \(C = (3 + \sqrt{2})(11 + 6\sqrt{2})\).<br>
                    c) Comparer \(3\) et \(2\sqrt{2}\).<br>
                    d) Calculer alors \(D = \dfrac{\sqrt{17 - 12\sqrt{2}}}{3 - 2\sqrt{2}}\).
                </p>
                <p><span class="Tests-Hub-question-number">2)</span> Soient \(a\) et \(b\) deux r√©els tels que \(-1 \leq a \leq 2\) et \(-4 \leq b \leq -1\).<br>
                    a) Donner un encadrement de \(2a + 3\), \(-2b + 1\) et \(a - b\).<br>
                    b) Simplifier \(E = |2a - 5| - |-2b + 1| - 2|a - b|\).
                </p>
            </div>
        </div>

        <!-- ==================== EXERCICE N¬∫3 (4 points) ==================== -->
        <div class="Tests-Hub-test-section">
            <h2>EXERCICE N¬∫3 (4 points)</h2>
            <div class="Tests-Hub-question">
                <p>On donne les expressions \(A = x^3 - 3x^2 + 3x - 2\) et \(B = x^3 + 8 - 2x(x+2)\).</p>
                <p><span class="Tests-Hub-question-number">1)</span> 
                    a) Calculer la valeur de \(A\) pour \(x = \sqrt{5}\).<br>
                    c) V√©rifier que pour tout r√©el \(x\) on a : \(A = (x - 1)^3 - 1\).<br>
                    d) D√©duire une factorisation de \(A\).
                </p>
                <p><span class="Tests-Hub-question-number">2)</span> 
                    a) Factoriser \(B\). En d√©duire que \(A - B = (x - 2)(-x + 5)\).<br>
                    b) D√©terminer les r√©els \(x \in \mathbb{R}\) tels que \(A = B\).
                </p>
            </div>
        </div>

        <!-- ==================== EXERCICE N¬∫4 (8 points) ==================== -->
        <div class="Tests-Hub-test-section">
            <h2>EXERCICE N¬∫4 (8 points)</h2>
            <p>Dans la figure ci-contre, \(ABC\) est un triangle tel que :</p>
            <p>\(AB = 4\,\text{cm}\), \(AC = 6\,\text{cm}\), \(BC = 5\,\text{cm}\), \(AN = \dfrac{3}{2}\,\text{cm}\), et \(AM = 1\,\text{cm}\).</p>
            <div class="Tests-Hub-diagram-container">
                <canvas id="exercise4Canvas" class="Tests-Hub-diagram-canvas" width="400" height="300" style="width:100%; height:auto;"></canvas>
            </div>
            <div class="Tests-Hub-question">
                <p><span class="Tests-Hub-question-number">1)</span> 
                    a) Montrer que les droites \((MN)\) et \((BC)\) sont parall√®les.<br>
                    b) Calculer \(MN\).
                </p>
                <p><span class="Tests-Hub-question-number">2)</span> Les droites \((MC)\) et \((BN)\) se coupent en \(O\). La parall√®le √† \((BC)\) passant par \(O\) coupe \([AB]\) en \(K\).</p>
                <p style="margin-left: 2rem;">
                    a) Montrer que \(\dfrac{OK}{MN} = \dfrac{BK}{BM}\).<br>
                    b) Montrer que \(\dfrac{OK}{BC} = \dfrac{MK}{MB}\).<br>
                    c) En d√©duire que \(\dfrac{OK}{BC} + \dfrac{OK}{MN} = 1\).<br>
                    d) Calculer alors \(OK\).
                </p>
            </div>
        </div>

        <!-- Bouton afficher/cacher correction -->
        <div class="Tests-Hub-correction-toggle-container">
            <button class="Tests-Hub-toggle-button" id="toggleCorrection">Afficher la correction</button>
        </div>
        
        <!-- ==================== SECTION CORRECTION ==================== -->
        <div id="correction" class="Tests-Hub-correction-section Tests-Hub-hidden">
            <h2>Correction d√©taill√©e</h2>
            
            <div class="Tests-Hub-correction-answer">
                <p><strong>Exercice 1</strong></p>
                <p><strong>Question 1</strong></p>
                <p>\((\sqrt{5} - 2)^2 = (\sqrt{5})^2 - 2 \times \sqrt{5} \times 2 + 2^2 = 5 - 4\sqrt{5} + 4 = 9 - 4\sqrt{5}\).</p>
                <p>‚úîÔ∏è R√©ponse correcte : <strong>c/ \(9 - 4\sqrt{5}\)</strong>.</p>
                <!-- Diagramme supprim√© -->
                <p><strong>Question 2</strong></p>
                <p>\(|x| \geq -2\) : pour tout r√©el \(x\), \(|x|\) est toujours positif ou nul, donc toujours sup√©rieur ou √©gal √† \(-2\). L'ensemble \(A\) est donc \(\mathbb{R}\).</p>
                <p>‚úîÔ∏è R√©ponse correcte : <strong>a/ \(A = \mathbb{R}\)</strong>.</p>
                <!-- Diagramme supprim√© -->
                <p><strong>Question 3</strong></p>
                <p>\(\sqrt{(\pi - 3,14)^2} = |\pi - 3,14|\). Comme \(\pi \approx 3,14159 > 3,14\), on a \(\pi - 3,14 > 0\), donc la valeur absolue est \(\pi - 3,14\).</p>
                <p>‚úîÔ∏è R√©ponse correcte : <strong>b/ \((\pi - 3,14)\)</strong>.</p>
                <p><strong>Question 4</strong></p>
                <p>\(\frac{1}{2}-1 = -\frac{1}{2}\), \(\frac{1}{3}-1 = -\frac{2}{3}\), ..., \(\frac{1}{50}-1 = -\frac{49}{50}\). Le produit de 49 facteurs n√©gatifs donne un signe n√©gatif. Par t√©lescopage, les valeurs absolues donnent \(\frac{1}{50}\).</p>
                <p>‚úîÔ∏è R√©ponse correcte : <strong>b/ \(-\frac{1}{50}\)</strong>.</p>
                <!-- Diagramme supprim√© -->
            </div>

            <!-- ========== Correction Exercice 2 ========== -->
            <div class="Tests-Hub-correction-answer">
                <p><strong>Exercice 2</strong></p>
                <p><strong>1) a)</strong> D√©veloppements :</p>
                <p>\((3+\sqrt{2})^2 = 3^2 + 2 \times 3 \times \sqrt{2} + (\sqrt{2})^2 = 9 + 6\sqrt{2} + 2 = 11 + 6\sqrt{2}\).</p>
                <p>\((3+\sqrt{2})^3 = (3+\sqrt{2})(11+6\sqrt{2}) = 3 \times 11 + 3 \times 6\sqrt{2} + \sqrt{2} \times 11 + \sqrt{2} \times 6\sqrt{2} = 33 + 18\sqrt{2} + 11\sqrt{2} + 6 \times 2 = 33 + 29\sqrt{2} + 12 = 45 + 29\sqrt{2}\).</p>
                <p>\((2\sqrt{2} - 3)^2 = (2\sqrt{2})^2 - 2 \times 2\sqrt{2} \times 3 + 3^2 = 8 - 12\sqrt{2} + 9 = 17 - 12\sqrt{2}\).</p>
                <p><strong>b)</strong> \(C = (3+\sqrt{2})(11+6\sqrt{2})\) est exactement le d√©veloppement de \((3+\sqrt{2})^3\) d'apr√®s la question pr√©c√©dente, donc \(C = 45 + 29\sqrt{2}\).</p>
                <p><strong>c)</strong> Comparaison de \(3\) et \(2\sqrt{2}\) : leurs carr√©s sont \(9\) et \(8\). Puisque \(9 > 8\) et les nombres sont positifs, on a \(3 > 2\sqrt{2}\).</p>
                <p><strong>d)</strong> \(D = \frac{\sqrt{17 - 12\sqrt{2}}}{3 - 2\sqrt{2}}\). On a \(17 - 12\sqrt{2} = (2\sqrt{2} - 3)^2\), donc \(\sqrt{17 - 12\sqrt{2}} = |2\sqrt{2} - 3|\). Comme \(2\sqrt{2} < 3\), \(|2\sqrt{2} - 3| = 3 - 2\sqrt{2}\). Ainsi \(D = \frac{3 - 2\sqrt{2}}{3 - 2\sqrt{2}} = 1\).</p>
                <p><strong>2) a)</strong> Pour \(a \in [-1, 2]\) et \(b \in [-4, -1]\) :</p>
                <p>\(-1 \le a \le 2 \Rightarrow -2 \le 2a \le 4 \Rightarrow 1 \le 2a+3 \le 7\).</p>
                <p>\(-4 \le b \le -1 \Rightarrow\) en multipliant par \(-2\) (inversion) : \(2 \le -2b \le 8 \Rightarrow 3 \le -2b+1 \le 9\).</p>
                <p>\(a - b\) : le minimum est obtenu pour \(a = -1\) et \(b = -1\) (car \(-b\) maximal) : \(-1 - (-1) = 0\). Le maximum pour \(a = 2\) et \(b = -4\) : \(2 - (-4) = 6\). Donc \(0 \le a - b \le 6\).</p>
                <p><strong>b)</strong> Simplifions \(E = |2a-5| - |-2b+1| - 2|a-b|\).</p>
                <p>D'apr√®s les encadrements : \(2a-5 \in [-7,-1]\) donc n√©gatif, ainsi \(|2a-5| = -(2a-5) = -2a+5\).</p>
                <p>\(-2b+1 \in [3,9]\) donc positif, ainsi \(|-2b+1| = -2b+1\).</p>
                <p>\(a-b \in [0,6]\) donc positif ou nul, ainsi \(|a-b| = a-b\).</p>
                <p>Alors \(E = (-2a+5) - (-2b+1) - 2(a-b) = -2a+5 +2b -1 -2a +2b = -4a + 4b + 4 = 4( -a + b + 1) = 4(b - a + 1)\).</p>
                <p>On peut aussi √©crire \(E = 4(1 - (a - b))\).</p>
            </div>

            <!-- ========== Correction Exercice 3 ========== -->
            <div class="Tests-Hub-correction-answer">
                <p><strong>Exercice 3</strong></p>
                <p><strong>1) a)</strong> Pour \(x = \sqrt{5}\) :</p>
                <p>\(A = (\sqrt{5})^3 - 3(\sqrt{5})^2 + 3\sqrt{5} - 2 = 5\sqrt{5} - 3 \times 5 + 3\sqrt{5} - 2 = 5\sqrt{5} - 15 + 3\sqrt{5} - 2 = 8\sqrt{5} - 17\).</p>
                <p><strong>c)</strong> \((x-1)^3 - 1 = (x^3 - 3x^2 + 3x - 1) - 1 = x^3 - 3x^2 + 3x - 2 = A\). Donc v√©rifi√©.</p>
                <p><strong>d)</strong> On a \(A = (x-1)^3 - 1\). C'est une diff√©rence de cubes : \(a^3 - b^3 = (a-b)(a^2 + ab + b^2)\) avec \(a = x-1\) et \(b = 1\). Ainsi \(A = ((x-1) - 1)((x-1)^2 + (x-1)\cdot 1 + 1^2) = (x-2)((x^2 - 2x + 1) + x - 1 + 1) = (x-2)(x^2 - 2x + 1 + x) = (x-2)(x^2 - x + 1)\).</p>
                <p><strong>2) a)</strong> Factorisons \(B = x^3 + 8 - 2x(x+2)\). On a \(x^3 + 8 = (x+2)(x^2 - 2x + 4)\). Donc \(B = (x+2)(x^2 - 2x + 4) - 2x(x+2) = (x+2)[(x^2 - 2x + 4) - 2x] = (x+2)(x^2 - 4x + 4) = (x+2)(x-2)^2\).</p>
                <p>Ensuite \(A - B = (x^3 - 3x^2 + 3x - 2) - [(x+2)(x-2)^2]\). Calculons \((x+2)(x-2)^2 = (x+2)(x^2 - 4x + 4) = x^3 - 4x^2 + 4x + 2x^2 - 8x + 8 = x^3 - 2x^2 - 4x + 8\). Alors \(A - B = (x^3 - 3x^2 + 3x - 2) - (x^3 - 2x^2 - 4x + 8) = x^3 - 3x^2 + 3x - 2 - x^3 + 2x^2 + 4x - 8 = (-3x^2+2x^2) + (3x+4x) + (-2-8) = -x^2 + 7x - 10 = -(x^2 - 7x + 10) = -(x-2)(x-5) = (x-2)(-x+5)\).</p>
                <p><strong>b)</strong> \(A = B\) √©quivaut √† \(A - B = 0\), soit \((x-2)(-x+5)=0\). Donc \(x=2\) ou \(x=5\).</p>
            </div>

            <!-- ========== Correction Exercice 4 ========== -->
            <div class="Tests-Hub-correction-answer">
                <p><strong>Exercice 4</strong></p>
                <p><strong>1) a)</strong> Dans le triangle ABC, M ‚àà [AB] et N ‚àà [AC]. On a \(\frac{AM}{AB} = \frac{1}{4}\) et \(\frac{AN}{AC} = \frac{3/2}{6} = \frac{3}{12} = \frac{1}{4}\). Donc \(\frac{AM}{AB} = \frac{AN}{AC}\). Par la r√©ciproque du th√©or√®me de Thal√®s, les droites (MN) et (BC) sont parall√®les.</p>
                <p><strong>b)</strong> D'apr√®s le th√©or√®me de Thal√®s, \(\frac{MN}{BC} = \frac{AM}{AB} = \frac{1}{4}\). Avec \(BC = 5\,\text{cm}\), on obtient \(MN = \frac{5}{4} = 1,25\,\text{cm}\).</p>
                <p><strong>2) a)</strong> Dans le triangle MBN, la droite (OK) est parall√®le √† (MN) (car (MN)//(BC) et (OK)//(BC)). Par Thal√®s, \(\frac{OK}{MN} = \frac{BK}{BM}\).</p>
                <p><strong>b)</strong> Dans le triangle MBC, (OK) est parall√®le √† (BC), donc \(\frac{OK}{BC} = \frac{MK}{MB}\).</p>
                <p><strong>c)</strong> En additionnant les deux √©galit√©s : \(\frac{OK}{BC} + \frac{OK}{MN} = \frac{MK}{MB} + \frac{BK}{BM}\). Or \(MK + BK = BM\), donc \(\frac{MK + BK}{BM} = \frac{BM}{BM} = 1\).</p>
                <p><strong>d)</strong> On a \(\frac{OK}{BC} + \frac{OK}{MN} = 1\). Avec \(BC = 5\) et \(MN = \frac{5}{4}\), on obtient \(\frac{OK}{5} + \frac{OK}{5/4} = \frac{OK}{5} + \frac{4\,OK}{5} = \frac{5\,OK}{5} = OK = 1\). Donc \(OK = 1\,\text{cm}\).</p>
                <div class="Tests-Hub-diagram-container">
                    <canvas id="correctionEx4Canvas" class="Tests-Hub-diagram-canvas" width="500" height="300" style="width:100%; height:auto;"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Boutons t√©l√©chargement (placeholders) -->
        <div class="Tests-Hub-download-buttons">
            <button class="Tests-Hub-download-button pdf" id="downloadPdf">
                <span>üìÑ</span>
                <span>PDF</span>
            </button>
            <button class="Tests-Hub-download-button odt" id="downloadOdt">
                <span>üìù</span>
                <span>ODT</span>
            </button>
            <button class="Tests-Hub-download-button png" id="downloadPng">
                <span>üñºÔ∏è</span>
                <span>PNG</span>
            </button>
        </div>
    </main>
    
    <footer class="Tests-Hub-footer-container">
        <div class="Tests-Hub-footer-content">
            <div class="Tests-Hub-footer-columns">
                <div class="Tests-Hub-footer-column">
                    <h3>D√©veloppeur</h3>
                    <p class="Tests-Hub-developer-name">Ziad El Majri</p>
                </div>
                <div class="Tests-Hub-footer-column">
                    <h3>Version</h3>
                    <p class="Tests-Hub-version-number">v2.2.1</p>
                </div>
                <div class="Tests-Hub-footer-column">
                    <h3>Liens</h3>
                    <ul class="Tests-Hub-footer-links-list">
                        <li><a href="#" class="Tests-Hub-footer-link">Conditions d'utilisation</a></li>
                        <li><a href="#" class="Tests-Hub-footer-link">Politique de confidentialit√©</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
    
    <script>
        // ========== Gestion du th√®me, langue, etc. (simplifi√©, bas√© sur le mod√®le) ==========
        let currentLanguage = 'fr';
        let isDarkTheme = false;
        
        // Traductions minimales pour les √©l√©ments dynamiques (boutons)
        const TestsHub_translations = {
            ar: { TestsHub: { synthesisTest: { showCorrection: "ÿπÿ±ÿ∂ ÿßŸÑÿ™ÿµÿ≠Ÿäÿ≠", hideCorrection: "ÿ•ÿÆŸÅÿßÿ° ÿßŸÑÿ™ÿµÿ≠Ÿäÿ≠", comingSoon: "ŸÇÿ±Ÿäÿ®Ÿãÿß!" }, theme: { toggle: "ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÖÿ∏ŸÑŸÖ" } } },
            fr: { TestsHub: { synthesisTest: { showCorrection: "Afficher la correction", hideCorrection: "Masquer la correction", comingSoon: "Bient√¥t disponible !" }, theme: { toggle: "Mode sombre" } } },
            en: { TestsHub: { synthesisTest: { showCorrection: "Show Correction", hideCorrection: "Hide Correction", comingSoon: "Coming soon!" }, theme: { toggle: "Dark Mode" } } }
        };
        
        function updateTextContent() {
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                let current = TestsHub_translations[currentLanguage];
                key.split('.').forEach(k => { if (current) current = current[k]; });
                if (typeof current === 'string') el.textContent = current;
            });
            updateThemeToggleText();
            updateCorrectionButtonText();
        }
        
        function updateThemeToggleText() {
            const themeToggle = document.querySelector('.Tests-Hub-theme-toggle span:nth-child(2)');
            const themeIcon = document.getElementById('themeIcon');
            if (themeToggle) themeToggle.textContent = isDarkTheme ? (currentLanguage === 'ar' ? 'ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÅÿßÿ™ÿ≠' : currentLanguage === 'fr' ? 'Mode clair' : 'Light Mode') : TestsHub_translations[currentLanguage].TestsHub.theme.toggle;
            if (themeIcon) themeIcon.textContent = isDarkTheme ? '‚òÄÔ∏è' : 'üåô';
        }
        
        function updateCorrectionButtonText() {
            const btn = document.getElementById('toggleCorrection');
            const corr = document.getElementById('correction');
            if (btn) btn.textContent = corr.classList.contains('Tests-Hub-hidden') ? TestsHub_translations[currentLanguage].TestsHub.synthesisTest.showCorrection : TestsHub_translations[currentLanguage].TestsHub.synthesisTest.hideCorrection;
        }
        
        function toggleTheme() {
            isDarkTheme = !isDarkTheme;
            document.body.classList.toggle('Tests-Hub-dark-theme', isDarkTheme);
            updateThemeToggleText();
            localStorage.setItem('testsHubTheme', isDarkTheme ? 'dark' : 'light');
            redrawAllGraphs();
        }
        
        function changeLanguage(lang) {
            if (!TestsHub_translations[lang]) return;
            currentLanguage = lang;
            updateTextContent();
            document.querySelector('.Tests-Hub-language-button span:nth-child(2)').textContent = lang === 'ar' ? 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©' : lang === 'fr' ? 'Fran√ßais' : 'English';
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
            document.documentElement.lang = lang;
            localStorage.setItem('testsHubLanguage', lang);
        }
        
        function downloadAsPDF() { alert(TestsHub_translations[currentLanguage]?.TestsHub?.synthesisTest?.comingSoon || "Bient√¥t disponible !"); }
        function downloadAsODT() { alert(TestsHub_translations[currentLanguage]?.TestsHub?.synthesisTest?.comingSoon || "Bient√¥t disponible !"); }
        function downloadAsPNG() { alert(TestsHub_translations[currentLanguage]?.TestsHub?.synthesisTest?.comingSoon || "Bient√¥t disponible !"); }
        
        // ========== NOUVELLES FONCTIONS pour l'exercice 4 (triangle √† l'√©chelle) ==========
        // Mod√®le g√©om√©trique avec AB=4, AC=6, BC=5. A(0,0), B(4,0), C calcul√©
        function getModelPoints() {
            // Calcul de C √† partir des longueurs
            const AB = 4;
            const AC = 6;
            const BC = 5;
            // A = (0,0), B = (4,0)
            // C = (x, y) avec x¬≤ + y¬≤ = AC¬≤ = 36, (x-4)¬≤ + y¬≤ = BC¬≤ = 25
            // Soustraction : (x-4)¬≤ - x¬≤ = 25-36 => (x¬≤ -8x+16) - x¬≤ = -11 => -8x+16 = -11 => -8x = -27 => x = 27/8 = 3.375
            const xC = 27/8;
            const yC = Math.sqrt(36 - xC*xC); // ‚âà 4.96
            return {
                A: {x: 0, y: 0},
                B: {x: AB, y: 0},
                C: {x: xC, y: yC}
            };
        }

        // Calcul des points M (sur AB √† 1 de A) et N (sur AC √† 1.5 de A)
        function getM_N(model) {
            const AM = 1; // AB=4, donc M √† 1/4 de A vers B
            const AN = 1.5; // AC=6, donc N √† 1/4 de A vers C
            const M = {
                x: model.A.x + (AM/4) * (model.B.x - model.A.x), // (1/4)*4 =1 en x, y=0
                y: model.A.y + (AM/4) * (model.B.y - model.A.y)
            };
            const N = {
                x: model.A.x + (AN/6) * (model.C.x - model.A.x), // AN/AC = 0.25
                y: model.A.y + (AN/6) * (model.C.y - model.A.y)
            };
            return { M, N };
        }

        // Intersection de (MC) et (BN) pour trouver O
        function findIntersection(M, C, B, N) {
            const MCx = C.x - M.x;
            const MCy = C.y - M.y;
            const BNx = N.x - B.x;
            const BNy = N.y - B.y;
            const dx = B.x - M.x;
            const dy = B.y - M.y;
            const det = BNx * MCy - MCx * BNy;
            if (Math.abs(det) < 1e-9) return null;
            const u = (BNx * dy - dx * BNy) / det;
            const v = (MCx * dy - dx * MCy) / det;
            return {
                x: M.x + u * MCx,
                y: M.y + u * MCy
            };
        }

        // Trouver K: intersection de la parall√®le √† BC passant par O avec AB
        function findK(O, A, B, C) {
            const BCx = C.x - B.x;
            const BCy = C.y - B.y;
            const ABx = B.x - A.x;
            const ABy = B.y - A.y;
            // Droite passant par O : O + t*(BCx, BCy)
            // Droite AB : A + s*(ABx, ABy)
            // R√©soudre O + t*BC = A + s*AB  =>  t*BC - s*AB = A - O
            const dx = A.x - O.x;
            const dy = A.y - O.y;
            const det = BCx * ABy - ABx * BCy; // d√©terminant pour Cramer
            if (Math.abs(det) < 1e-9) return null;
            const t = (dx * ABy - ABx * dy) / det;
            const s = (BCx * dy - dx * BCy) / det;
            return {
                x: A.x + s * ABx,
                y: A.y + s * ABy
            };
        }

        // Transformation des coordonn√©es du mod√®le vers le canvas
        function modelToCanvas(modelPoints, canvasWidth, canvasHeight, padding = 40) {
            // Chercher les extr√™mes du mod√®le
            const points = [modelPoints.A, modelPoints.B, modelPoints.C, modelPoints.M, modelPoints.N];
            if (modelPoints.O) points.push(modelPoints.O);
            if (modelPoints.K) points.push(modelPoints.K);
            let minX = Math.min(...points.map(p => p.x));
            let maxX = Math.max(...points.map(p => p.x));
            let minY = Math.min(...points.map(p => p.y));
            let maxY = Math.max(...points.map(p => p.y));
            // Ajouter une petite marge
            const rangeX = maxX - minX || 1;
            const rangeY = maxY - minY || 1;
            const scaleX = (canvasWidth - 2*padding) / rangeX;
            const scaleY = (canvasHeight - 2*padding) / rangeY;
            const scale = Math.min(scaleX, scaleY);
            const offsetX = padding + (canvasWidth - 2*padding - rangeX*scale)/2;
            const offsetY = padding + (canvasHeight - 2*padding - rangeY*scale)/2;
            
            return (p) => ({
                x: offsetX + (p.x - minX) * scale,
                y: offsetY + (p.y - minY) * scale
            });
        }

        // Dessin de l'exercice 4 (√©nonc√©) sans O et K
        function drawExercise4() {
            const canvas = document.getElementById('exercise4Canvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const container = canvas.parentElement;
            canvas.width = container.clientWidth;
            canvas.height = container.clientWidth * 0.75;
            const w = canvas.width, h = canvas.height;

            const model = getModelPoints();
            const { M, N } = getM_N(model);
            const transform = modelToCanvas({A: model.A, B: model.B, C: model.C, M, N}, w, h);
            
            ctx.clearRect(0, 0, w, h);
            // Dessin du triangle ABC
            ctx.strokeStyle = isDarkTheme ? '#60a5fa' : '#1e3a8a';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(transform(model.A).x, transform(model.A).y);
            ctx.lineTo(transform(model.B).x, transform(model.B).y);
            ctx.lineTo(transform(model.C).x, transform(model.C).y);
            ctx.closePath();
            ctx.stroke();

            // Dessin de MN
            ctx.strokeStyle = isDarkTheme ? '#f87171' : '#ef4444';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(transform(M).x, transform(M).y);
            ctx.lineTo(transform(N).x, transform(N).y);
            ctx.stroke();

            // Points
            ctx.fillStyle = isDarkTheme ? '#eee' : '#111';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'bottom';
            ctx.fillText('A', transform(model.A).x, transform(model.A).y-5);
            ctx.fillText('B', transform(model.B).x, transform(model.B).y-5);
            ctx.fillText('C', transform(model.C).x, transform(model.C).y-5);
            ctx.fillText('M', transform(M).x, transform(M).y-5);
            ctx.fillText('N', transform(N).x, transform(N).y-5);

            // Cercles
            ctx.fillStyle = isDarkTheme ? '#60a5fa' : '#3b82f6';
            ctx.beginPath(); ctx.arc(transform(model.A).x, transform(model.A).y, 4, 0, 2*Math.PI); ctx.fill();
            ctx.beginPath(); ctx.arc(transform(model.B).x, transform(model.B).y, 4, 0, 2*Math.PI); ctx.fill();
            ctx.beginPath(); ctx.arc(transform(model.C).x, transform(model.C).y, 4, 0, 2*Math.PI); ctx.fill();
            ctx.fillStyle = isDarkTheme ? '#f87171' : '#ef4444';
            ctx.beginPath(); ctx.arc(transform(M).x, transform(M).y, 4, 0, 2*Math.PI); ctx.fill();
            ctx.beginPath(); ctx.arc(transform(N).x, transform(N).y, 4, 0, 2*Math.PI); ctx.fill();
        }

        // Dessin de la correction (avec O et K)
        function drawCorrectionEx4() {
            const canvas = document.getElementById('correctionEx4Canvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const container = canvas.parentElement;
            canvas.width = container.clientWidth;
            canvas.height = container.clientWidth * 0.6;
            const w = canvas.width, h = canvas.height;

            const model = getModelPoints();
            const { M, N } = getM_N(model);
            const O = findIntersection(M, model.C, model.B, N);
            if (!O) return;
            const K = findK(O, model.A, model.B, model.C);
            if (!K) return;

            const transform = modelToCanvas({A: model.A, B: model.B, C: model.C, M, N, O, K}, w, h);
            
            ctx.clearRect(0, 0, w, h);
            // Triangle ABC
            ctx.strokeStyle = isDarkTheme ? '#60a5fa' : '#1e3a8a';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(transform(model.A).x, transform(model.A).y);
            ctx.lineTo(transform(model.B).x, transform(model.B).y);
            ctx.lineTo(transform(model.C).x, transform(model.C).y);
            ctx.closePath();
            ctx.stroke();

            // MN
            ctx.strokeStyle = isDarkTheme ? '#f87171' : '#ef4444';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(transform(M).x, transform(M).y);
            ctx.lineTo(transform(N).x, transform(N).y);
            ctx.stroke();

            // MC et BN (pointill√©s)
            ctx.strokeStyle = isDarkTheme ? '#fbbf24' : '#f59e0b';
            ctx.setLineDash([5, 3]);
            ctx.beginPath();
            ctx.moveTo(transform(M).x, transform(M).y);
            ctx.lineTo(transform(model.C).x, transform(model.C).y);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(transform(model.B).x, transform(model.B).y);
            ctx.lineTo(transform(N).x, transform(N).y);
            ctx.stroke();
            ctx.setLineDash([]);

            // OK (parall√®le √† BC)
            ctx.strokeStyle = isDarkTheme ? '#34d399' : '#10b981';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(transform(O).x, transform(O).y);
            ctx.lineTo(transform(K).x, transform(K).y);
            ctx.stroke();

            // Points
            ctx.fillStyle = isDarkTheme ? '#eee' : '#111';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'bottom';
            ctx.fillText('A', transform(model.A).x, transform(model.A).y-5);
            ctx.fillText('B', transform(model.B).x, transform(model.B).y-5);
            ctx.fillText('C', transform(model.C).x, transform(model.C).y-5);
            ctx.fillText('M', transform(M).x, transform(M).y-5);
            ctx.fillText('N', transform(N).x, transform(N).y-5);
            ctx.fillText('O', transform(O).x, transform(O).y-5);
            ctx.fillText('K', transform(K).x, transform(K).y-5);

            // Cercles
            ctx.fillStyle = isDarkTheme ? '#60a5fa' : '#3b82f6';
            ctx.beginPath(); ctx.arc(transform(model.A).x, transform(model.A).y, 4, 0, 2*Math.PI); ctx.fill();
            ctx.beginPath(); ctx.arc(transform(model.B).x, transform(model.B).y, 4, 0, 2*Math.PI); ctx.fill();
            ctx.beginPath(); ctx.arc(transform(model.C).x, transform(model.C).y, 4, 0, 2*Math.PI); ctx.fill();
            ctx.fillStyle = isDarkTheme ? '#f87171' : '#ef4444';
            ctx.beginPath(); ctx.arc(transform(M).x, transform(M).y, 4, 0, 2*Math.PI); ctx.fill();
            ctx.beginPath(); ctx.arc(transform(N).x, transform(N).y, 4, 0, 2*Math.PI); ctx.fill();
            ctx.fillStyle = isDarkTheme ? '#fbbf24' : '#f59e0b';
            ctx.beginPath(); ctx.arc(transform(O).x, transform(O).y, 4, 0, 2*Math.PI); ctx.fill();
            ctx.fillStyle = isDarkTheme ? '#34d399' : '#10b981';
            ctx.beginPath(); ctx.arc(transform(K).x, transform(K).y, 4, 0, 2*Math.PI); ctx.fill();
        }

        function redrawAllGraphs() {
            // Exercice 1 : plus de diagrammes
            drawExercise4();
            if (!document.getElementById('correction').classList.contains('Tests-Hub-hidden')) {
                drawCorrectionEx4();
            }
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('testsHubTheme');
            if (savedTheme === 'dark') {
                isDarkTheme = true;
                document.body.classList.add('Tests-Hub-dark-theme');
            }
            const savedLanguage = localStorage.getItem('testsHubLanguage');
            if (savedLanguage && TestsHub_translations[savedLanguage]) {
                currentLanguage = savedLanguage;
            }
            if (currentLanguage === 'ar') document.documentElement.dir = 'rtl';
            else document.documentElement.dir = 'ltr';
            
            updateTextContent();
            
            // KaTeX rendering
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "$", right: "$", display: false},
                    {left: "\\(", right: "\\)", display: false},
                    {left: "\\[", right: "\\]", display: true}
                ],
                throwOnError: false
            });
            
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            
            document.querySelectorAll('.Tests-Hub-language-option').forEach(opt => {
                opt.addEventListener('click', function() {
                    changeLanguage(this.getAttribute('data-language'));
                });
            });
            
            document.getElementById('downloadPdf').addEventListener('click', downloadAsPDF);
            document.getElementById('downloadOdt').addEventListener('click', downloadAsODT);
            document.getElementById('downloadPng').addEventListener('click', downloadAsPNG);
            
            const correctionBtn = document.getElementById('toggleCorrection');
            correctionBtn.addEventListener('click', function() {
                const corr = document.getElementById('correction');
                corr.classList.toggle('Tests-Hub-hidden');
                updateCorrectionButtonText();
                redrawAllGraphs();
                renderMathInElement(corr, { delimiters: [{left: "$$", right: "$$", display: true}, {left: "$", right: "$", display: false}], throwOnError: false });
            });
            
            redrawAllGraphs();
            window.addEventListener('resize', redrawAllGraphs);
        });
    </script>
</body>
</html>